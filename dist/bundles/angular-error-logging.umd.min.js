!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("error-stack-parser"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("angular-error-logging",["exports","@angular/core","@angular/common/http","@angular/common","error-stack-parser","rxjs/operators"],r):r(t["angular-error-logging"]={},t.ng.core,t.ng.common.http,t.ng.common,null,t.rxjs.operators)}(this,function(t,n,l,u,g,o){"use strict";var r=function d(){this.endpoint="https://dashboard.7dev.nl/api/logs"},e=function h(t,r,e,o,n,i){this.type=t,this.status_code=r,this.error=e,this.file=o,this.line=n,this.stacktrac=i},i=function(t,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};var a=new n.InjectionToken("Global config for error-logging"),s=function(){function t(t,r,e){this.globalConfig=t,this.httpClient=r,this.locationStrategy=e}return t.prototype.buildError=function(t,r){var e=this.globalConfig.appId,o=this.globalConfig.environment,n=this.locationStrategy instanceof u.PathLocationStrategy?this.locationStrategy.path():"Not applicable",i=t instanceof l.HttpErrorResponse?t.status.toString():"Not applicable",a=r?JSON.stringify(r):"Not applicable",s=t.message||t.toString()||"Not defined",c=t instanceof l.HttpErrorResponse?"No stack available":g.parse(t),p={type:"JS",appId:e,env:o,url:n,status_code:i,request:a,error:s,file:t instanceof l.HttpErrorResponse?"Not applicable":c[0].fileName,line:t instanceof l.HttpErrorResponse?"Not applicable":c[0].lineNumber,stacktrace:JSON.stringify(c)};this.reportError(p).subscribe()},t.prototype.reportError=function(t){return this.httpClient.post(this.globalConfig.endpoint,t,{headers:{Authorization:"Bearer "+this.globalConfig.access_token}})},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:r,decorators:[{type:n.Optional},{type:n.Inject,args:[a]}]},{type:l.HttpClient},{type:u.LocationStrategy}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(a,8),n.inject(l.HttpClient),n.inject(u.LocationStrategy))},token:t,providedIn:"root"}),t}(),c=function(e){function t(t){var r=e.call(this)||this;return r.injector=t,r}return function o(t,r){function e(){this.constructor=t}i(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}(t,e),t.prototype.handleError=function(t){t instanceof l.HttpErrorResponse||this.injector.get(s).buildError(t);e.prototype.handleError.call(this,t)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(n.ErrorHandler),p=function(){function t(t,r){this.globalConfig=t,this.errorLoggingService=r}return t.prototype.intercept=function(r,t){var e=this;return t.handle(r).pipe(o.tap(function(t){t instanceof l.HttpResponse&&200!==t.status&&401!==t.status&&403!==t.status&&r.url!==e.globalConfig.endpoint&&e.errorLoggingService.buildError(new Error(t.status+" !== 200"),r)},function(t){r.url!==e.globalConfig.endpoint&&401!==t.status&&403!==t.status&&e.errorLoggingService.buildError(t,r)}))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:r,decorators:[{type:n.Optional},{type:n.Inject,args:[a]}]},{type:s}]},t}(),f=function(){function r(){}return r.forRoot=function(t){return{ngModule:r,providers:[s,{provide:a,useValue:t}]}},r.decorators=[{type:n.NgModule,args:[{imports:[],declarations:[],exports:[],providers:[{provide:n.ErrorHandler,useClass:c},{provide:l.HTTP_INTERCEPTORS,useClass:p,multi:!0}]}]}],r}();t.ErrorLoggingOptions=r,t.JsError=e,t.ErrorLoggingModule=f,t.ɵa=c,t.ɵb=p,t.ɵd=s,t.ɵc=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-error-logging.umd.min.js.map