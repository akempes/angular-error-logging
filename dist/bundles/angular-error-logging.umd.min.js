!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("error-stack-parser"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("angular-error-logging",["exports","@angular/core","@angular/common/http","@angular/common","error-stack-parser","rxjs/operators"],t):t(r["angular-error-logging"]={},r.ng.core,r.ng.common.http,r.ng.common,null,r.rxjs.operators)}(this,function(r,n,u,l,g,o){"use strict";var t=function f(r,t,e,o,n,i){this.type=r,this.status_code=t,this.error=e,this.file=o,this.line=n,this.stacktrac=i},i=function(r,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)};var e=new n.InjectionToken("Global config for error-logging"),a=function(){function r(r,t,e){this.globalConfig=r,this.httpClient=t,this.locationStrategy=e,this.endpoint="https://dashboard.7dev.nl/api/logs"}return r.prototype.buildError=function(r,t){var e=this.globalConfig.appId,o=this.globalConfig.environment,n=this.locationStrategy instanceof l.PathLocationStrategy?this.locationStrategy.path():"Not applicable",i=r instanceof u.HttpErrorResponse?r.status.toString():"Not applicable",a=t?JSON.stringify(t):"Not applicable",s=r.message||r.toString()||"Not defined",c=r instanceof u.HttpErrorResponse?"No stack available":g.parse(r),p={type:"JS",appId:e,env:o,url:n,status_code:i,request:a,error:s,file:r instanceof u.HttpErrorResponse?"Not applicable":c[0].fileName,line:r instanceof u.HttpErrorResponse?"Not applicable":c[0].lineNumber,stacktrace:JSON.stringify(c)};this.reportError(p).subscribe()},r.prototype.reportError=function(r){return this.httpClient.post(this.endpoint,r,{headers:{Authorization:"Bearer "+this.globalConfig.access_token}})},r.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Optional},{type:n.Inject,args:[e]}]},{type:u.HttpClient},{type:l.LocationStrategy}]},r.ngInjectableDef=n.defineInjectable({factory:function(){return new r(n.inject(e,8),n.inject(u.HttpClient),n.inject(l.LocationStrategy))},token:r,providedIn:"root"}),r}(),s=function(e){function r(r){var t=e.call(this)||this;return t.injector=r,t}return function o(r,t){function e(){this.constructor=r}i(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(r,e),r.prototype.handleError=function(r){r instanceof u.HttpErrorResponse||this.injector.get(a).buildError(r);e.prototype.handleError.call(this,r)},r.decorators=[{type:n.Injectable}],r.ctorParameters=function(){return[{type:n.Injector}]},r}(n.ErrorHandler),c=function(){function r(r){this.errorLoggingService=r}return r.prototype.intercept=function(t,r){var e=this;return r.handle(t).pipe(o.tap(function(r){r instanceof u.HttpResponse&&200!==r.status&&t.url!==e.errorLoggingService.endpoint&&e.errorLoggingService.buildError(new Error(r.status+" !== 200"),t)},function(r){t.url!==e.errorLoggingService.endpoint&&e.errorLoggingService.buildError(r,t)}))},r.decorators=[{type:n.Injectable}],r.ctorParameters=function(){return[{type:a}]},r}(),p=function(){function t(){}return t.forRoot=function(r){return{ngModule:t,providers:[a,{provide:e,useValue:r}]}},t.decorators=[{type:n.NgModule,args:[{imports:[],declarations:[],exports:[],providers:[{provide:n.ErrorHandler,useClass:s},{provide:u.HTTP_INTERCEPTORS,useClass:c,multi:!0}]}]}],t}();r.JsError=t,r.ErrorLoggingModule=p,r.ɵa=s,r.ɵb=c,r.ɵc=a,r.ɵd=e,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=angular-error-logging.umd.min.js.map